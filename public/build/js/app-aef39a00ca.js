document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("categorias-btn"),t=document.getElementById("categorias-modal"),n=document.querySelector(".close");if(e&&t&&n){function o(){document.body.style.overflow=""}t.classList.remove("show"),e.addEventListener("click",(()=>{t.classList.add("show"),document.body.style.overflow="hidden"})),n.addEventListener("click",(()=>{t.classList.remove("show"),o()})),window.addEventListener("click",(e=>{e.target===t&&(t.classList.remove("show"),o())}))}const a=document.querySelectorAll(".contador");if(a.length>0){const d=e=>{const t=parseInt(e.dataset.target,10);let n=0;const o=t/31.25,a=()=>{n+=o,n>=t?e.innerText=`+${t}`:(e.innerText=`+${Math.floor(n)}`,requestAnimationFrame(a))};a()},u=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.remove("animado"),e.target.innerText="+0",d(e.target))}))}),{threshold:.3});a.forEach((e=>u.observe(e))),window.addEventListener("load",(()=>{a.forEach((e=>{e.classList.contains("animado")||d(e)}))}))}const s=document.querySelector(".dashboard__mobile-menu"),r=document.querySelector(".dashboard__sidebar");s&&r&&(s.addEventListener("click",(function(){r.classList.toggle("sidebar--mostrar")})),document.body.addEventListener("click",(function(e){r.contains(e.target)||s.contains(e.target)||r.classList.remove("sidebar--mostrar")})));const i=document.getElementById("modal-reporte-valoracion");if(!i)return;const A=document.getElementById("form-reporte-valoracion"),c=i.querySelector(".modal-reporte__cerrar"),l=document.getElementById("reporte-valoracion-id");document.body.addEventListener("click",(function(e){if(e.target.closest(".reportar-btn")){const t=e.target.closest(".reportar-btn").dataset.valoracionId;l.value=t,i.style.display="flex"}})),c.onclick=()=>{i.style.display="none"},window.onclick=e=>{e.target===i&&(i.style.display="none")},A.addEventListener("submit",(async function(e){e.preventDefault();const t=new FormData(this),n=Object.fromEntries(t.entries());try{const e=await fetch("/valoraciones/reportar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e.json();alert(t.message||t.error),e.ok&&(i.style.display="none",A.reset())}catch(e){alert("Error al conectar con el servidor. Int√©ntalo de nuevo.")}}))})),function(e,t){function n(e,t){return typeof e===t}function o(e){var t=l.className,n=A._config.classPrefix||"";if(d&&(t=t.baseVal),A._config.enableJSClass){var o=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(o,"$1"+n+"js$2")}A._config.enableClasses&&(t+=" "+n+e.join(" "+n),d?l.className.baseVal=t:l.className=t)}function a(e,t){if("object"==typeof e)for(var n in e)c(e,n)&&a(n,e[n]);else{var s=(e=e.toLowerCase()).split("."),r=A[s[0]];if(2==s.length&&(r=r[s[1]]),void 0!==r)return A;t="function"==typeof t?t():t,1==s.length?A[s[0]]=t:(!A[s[0]]||A[s[0]]instanceof Boolean||(A[s[0]]=new Boolean(A[s[0]])),A[s[0]][s[1]]=t),o([(t&&0!=t?"":"no-")+s.join("-")]),A._trigger(e,t)}return A}var s=[],r=[],i={_version:"3.6.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout((function(){t(n[e])}),0)},addTest:function(e,t,n){r.push({name:e,fn:t,options:n})},addAsyncTest:function(e){r.push({name:null,fn:e})}},A=function(){};A.prototype=i,A=new A;var c,l=t.documentElement,d="svg"===l.nodeName.toLowerCase();!function(){var e={}.hasOwnProperty;c=n(e,"undefined")||n(e.call,"undefined")?function(e,t){return t in e&&n(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),i._l={},i.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),A.hasOwnProperty(e)&&setTimeout((function(){A._trigger(e,A[e])}),0)},i._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout((function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)}),0),delete this._l[e]}},A._q.push((function(){i.addTest=a})),A.addAsyncTest((function(){function e(e,t,n){function o(t){var o=!(!t||"load"!==t.type)&&1==s.width;a(e,"webp"===e&&o?new Boolean(o):o),n&&n(t)}var s=new Image;s.onerror=o,s.onload=o,s.src=t}var t=[{uri:"data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoBAAEAAwA0JaQAA3AA/vuUAAA=",name:"webp"},{uri:"data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",name:"webp.alpha"},{uri:"data:image/webp;base64,UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA",name:"webp.animation"},{uri:"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",name:"webp.lossless"}],n=t.shift();e(n.name,n.uri,(function(n){if(n&&"load"===n.type)for(var o=0;o<t.length;o++)e(t[o].name,t[o].uri)}))})),function(){var e,t,o,a,i,c;for(var l in r)if(r.hasOwnProperty(l)){if(e=[],(t=r[l]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(o=0;o<t.options.aliases.length;o++)e.push(t.options.aliases[o].toLowerCase());for(a=n(t.fn,"function")?t.fn():t.fn,i=0;i<e.length;i++)1===(c=e[i].split(".")).length?A[c[0]]=a:(!A[c[0]]||A[c[0]]instanceof Boolean||(A[c[0]]=new Boolean(A[c[0]])),A[c[0]][c[1]]=a),s.push((a?"":"no-")+c.join("-"))}}(),o(s),delete i.addTest,delete i.addAsyncTest;for(var u=0;u<A._q.length;u++)A._q[u]();e.Modernizr=A}(window,document);